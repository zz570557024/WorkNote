# WorkNote

## 数据中心（Internet Data Center，简称IDC）
### 数据中心机房

* EPMS(工程业务管理系统)
* ITMS（智能监控管理系统）
* BMS（楼宇管理系统）
* CCTV（视频监控系统）
* ACCESS system（门禁管理系统）
* fire system（消防监控系统）

### 数据中心三要素
* 计算
* 存储
* 网络

### 存储

存储系统三指标：
* IOPS（I/O per secend）
* 带宽 （带宽=IOPS * 传输的数据块的大小）
* 时延

最大传输单元（Maximum Transmission Unit，MTU）用来通知对方所能接受数据服务单元的最大尺寸，说明发送方能够接受的有效载荷大小

#### DAS

#### NAS

#### SAN

### 网络

#### 数据中心交换机类型

* 接入交换机
* 核心交换机
* 管理交换机

#### 光模块

以太网交换机常用的光模块有SFP，GBIC，XFP，XENPAK。
英文全称:
1. SFP:Small Form-factor Pluggabletransceiver ，小封装可插拔收发器
2. GBIC：GigaBit Interface Converter，千兆以太网接口转换器
3. XFP: 10-Gigabit small Form-factorPluggable transceiver 万兆以太网接口
4. XENPAK: 10 Gigabit EtherNet TransceiverPAcKage万兆以太网接口收发器集合封装


#### 多模和单模光纤的区别？

<b>多模：<b>可以传播数百到上千个模式的光纤，称为多模（MM）光纤。根据折射率在纤芯和包层的径向分布情况，又可分为阶跃多模光纤和渐变多模光纤。几乎所有的多模光纤尺寸均为50/125μm或62.5/125μm，并且带宽（光纤的信息传输量）通常为200MHz到2GHz。多模光端机通过多模光纤可进行长达5公里的传输。以发光二极管或激光器为光源。

<b>单模：<b>只能传播一个模式的光纤称为单模光纤。标准单模（SM）光纤折射率分布和阶跃型光纤相似，只是纤芯直径比多模光纤小得多。

#### 其他

* 集线器-----hub
* 交换机-----switch（基本原理：a. 根据数据的源MAC地址进行学习；b.交换机对于未知或广播消息进行泛洪；c．交换机针对于已知帧进行过滤；）
* 路由器-----router

交换机处理消息方式：泛洪、转发、丢弃

```
# 交换机命令
language-mode Chinese #(切换语言)
sys
system-view
interface #(进入接口)
undo negotiation auto #(关闭系统双工自动协商)
speed 1000 #将接口速率设置为1000
duplex full #将接口设置为全双工
duplex half #将接口设置为半双工

```
### VLAN
vlanID:1--->4094(2^12)
* access
* trank

### 数据仓库
### 数据池
### 数据湖

从定义看，一块u盘即符合数据湖的定义。u盘可以是数据湖，oss可以是数据湖，hdfs、盘古也可以是数据湖。它们均严格的符合数据湖的定义。作为企业的数据湖技术选型第一个需要考虑的问题就是：采用什么样的存储介质或存储系统作为自己的数据湖解决方案。众所周知，不同的存储介质或存储系统有不同的优势和劣势。比如：有的存储系统随机读取的响应时间更好、有的系统批量读取的吞吐量更好、有的系统存储成本更低、有的系统扩展性更好、有的系统结构化数据组织得更高效...相应的，这些提到的各个指标中有些恰恰是有些存储所不擅长的，如何享有所有存储系统的优势、规避所有存储系统的劣势变成了云上数据湖服务要考虑的首要问题。

> 亚马逊AWS看来：“数据湖是一个中心数据存储的容器，这个容器可以存储格式化、非格式化的各种各样的数据；这些数据非常容易被快速缩放、有各种方法和工具对这些数据进行查询、可以做各种各样的分析”。

数据湖要解决的三大问题：
* 元数据管理
* 数据集成
* 数据开发

### 数据中台

> 作为“中台”的开山鼻祖——阿里巴巴的数据中台全景图如下图所示：
阿里巴巴数据中台核心内核是OneData体系，即数据中台构建的方法论体系总称，包括数据构建管理的OneModel，实现数据融通连接的OneID，再到提供统一数据服务的One Service，贯穿于整个数据研发流程中并且通过工具实施落地，帮助企业高效建设及管理数据。



## 大数据平台

大数据平台是指以处理海量数据存储、计算及不间断流数据实时计算等场景为主的一套基础设施。典型的包括Hadoop系列、Spark、Storm、Flink以及Flume/Kafka等集群。

是指以处理海量数据存储、计算及不间断流数据实时计算等场景为主的一套基础设施。典型的包括Hadoop系列、Spark、Storm、Flink以及Flume/Kafka等集群。

### 阿里“飞天”大数据平台

飞天大数据平台提供的统一元数据中心，让企业同一个地方做
1. 数据资产管理、
2. 数据分析、
3. 数据质量管理与监控、
4. 数据安全与数据分享等

1. 跨云、
2. 跨引擎、
3. 跨存储、
4. 跨 Region 四项能力

阿里云得以对外提供一个完整的大数据体系，把所有用户在不同角度、不同需求的数据统一在一个平台上管理起来。过去工程师需要自行组合无数产品来做的事情，现在通过一体化的飞天大数据平台可以快速完成。

#### 综合数据治理平台 DataWorks 在市场上是否有对标的竞品呢？

DataWorks 之于飞天大数据平台，就如同 Windows 操作系统之于 CPU；

问题在于它是通过提供一系列产品组合起来实现综合数据治理，包括单独的 WebIDE 产品、单独的交互式查询产品等，使用时需要用户自己像搭积木一样把需要的产品一一组合起来；而在飞天大数据平台上，用户只需要勾选所需的“积木”，就可以搞定整套流程，这项能力在国内也是独一无二的。

#### 为了做到现在的算力水平，飞天大数据平台在技术上经历了三个阶段的演进。

- 第一个阶段是规模化，这个阶段的核心是能否在给定的计算集群规模下完成这么多的工作量，2013 年的 5K 集群规模就是这一阶段的关键点。当阿里双十一当天真的需要这么多算力的时候，给到足够的硬件，是否能真正把这些硬件的算力释放出来满足需求？这个阶段更强调的是系统的扩展能力，飞天大数据平台在这个阶段构建了单集群和多集群扩展的能力。
- 第二个阶段是引擎侧优化，2017 年 MaxCompute 2.0 发布前，就将引擎侧从底层到顶层做了整体的重构优化，为了让同一个算子能够算得更快更好，MaxCompute 从存储到计算，整个系统全部重构了，云侧代码基本重写。
- 第三个阶段即当前飞天大数据平台所处的阶段，纯粹软件层面的优化工作已经做到一定程度了，下一步阿里希望能够结合 AI 做智能优化。

#### AI能力

阿里将飞天大数据平台定位为 **与 AI 双生的系统**，它不仅向 AI 提供基础的计算力和数据，也通过 AI 的方式来实现大数据计算和存储的优化。

智能云数仓（Auto Cloud Data Warehouse），就使用了大数据和 AI 的方式来反过来管理和优化大数据。

Auto Cloud Data Warehouse 包括以下三层能力：

1. 尝试寻找计算的第一性原理实现效率优化：CBO+HBO、Learned Statistics、智能计算重用、索引推荐与最优化、自动分层存储、存储层的自适应编码与压缩；
2. 实现可量化的资源规划和管理：作业运行模式自动分类、动态 Quota 调整和缩扩容、作业运行预测与自动预报警、作业自动升降级、数据排布与跨集群调度；
3. 智能建模、自动发现数据的内在关联：相似作业与数据的识别、自动纠错、作业运行预测与自动预报警、作业自动升降级。

> 有了 AI 的加持，**未来大数据平台将不再需要人类做 DBA 类似的工作。** 为什么说 DBA 这个角色在大数据领域走不下去了？关涛认为，随着数据量的增大，数据的关系已经超出人脑能够管理优化的范畴。向智能化方向发展，是大数据系统下一步必须要做的事情。

#### 阿里云OSS(对象存储服务)

OSS是阿里云对象存储服务（Object Storage Service）的一个简称，它是阿里云提供的海量、安全、低成本、高可靠的云存储服务。

OSS可以被理解成一个即开即用、无限大空间的存储集群。相较传统建服务器存储而言，OSS在可靠性、安全性、成本和数据处理能力方面都有着突出的优势。使用OSS，您可以通过网络随时存储和调用包括文本、图片和视频等在内的各种非结构化数据文件。

OSS将数据文件以对象/文件（Object）的形式上传到存储空间（Bucket）中。OSS提供的是一个Key-Value键值对形式的对象存储服务。用户可以根据Object的名称（Key）唯一地址获取该Object的内容。

### 华为FusionInsight HD大数据平台

## 云平台

### 微服务&serverless

微服务包含了对某个资源的所有CURD操作，而Serverless则把针对资源的创建、读取、删除、更新等操作进一步拆分，每一个操作抽象为一个函数，Serverless是通过直接把这些函数暴露的形式进行使用。

Serverless用户甚至都不需要关心运行所需要多少CPU、内存等计算资源，因为Serverless平台就提供了近似无限的计算能力，这也是和PaaS的主要区别，即大部分PaaS平台，用户依然需要手动维护运行的容量，需要手动扩容或者缩放平台规模。因此Serverless通常又称为函数计算服务(Function as Service, FaaS)。

>而对于FaaS应用，这种问题完全是透明的。AWS云架构战略副总裁Adrian Cockcroft曾经针对两者的界定给出了一个简单的方法：“如果你的PaaS能够有效地在20毫秒内启动实例并运行半秒,那么就可以称之为Serverless”。--摘抄自《从IaaS到FaaS—— Serverless架构的前世今生》

#### Serverless总结
Serverless架构中主要由应用(代码)、运行环境(runtime)以及事件这三个重要因素构成，其中事件是Serverless的灵魂，打通了云平台服务的血脉，可以说Serverless的函数计算是云平台服务的黏合剂，把看起来不相关的服务很好的串起来，实现服务扩展。

#### 基于Serverless架构的Web应用

* 传统Web应用部署架构

我们知道传统的Web应用部署过程通常包括如下步骤：
1. 预估需要的资源量，需要多少CPU、多少内存、多少存储；
根据资源量采购服务器或者启动虚拟机；

2. 在服务器或者虚拟机上安装操作系统、运行环境（如java、php、python)以及依赖组件（如数据库、缓存、消息队列等)；
安装Web容器，比如Nginx、Tomcat、Apache Httpd等；
代码打包部署，放到Web容器中运行；
3. 配置负载均衡，如F5、Nginx、Haproxy等，实现高可用以及更高的处理请求能力。

这种方式的问题如下：
1. 应用发布周期长，从资源准备到应用发布，需要一系列的工作。
2. 不易于扩展，当请求过大时，需要重新准备新的服务器部署运行环境，配置负载均衡。
3. 资源浪费，当没有请求时资源闲置。

目前基于Kubernetes平台服务发布则相对来说要敏捷得多，应用部署流程如下：

1. 代码提交后由CI/CD工具自动化打包编译，生成容器镜像；
2. 通过Deployment声明应用部署，根据声明创建Web中间件、数据库、PV存储卷等容器实例；
3. 通过Service声明应用发布模式，实现四层负载。
4. 通过Ingress实现七层负载；

只要Kubernetes部署好，应用基本实现了和底层资源的隔离，比如我们通过Ingress实现七层负载均衡，但这个负载均衡到底是基于Ngnix实现的还是F5实现，其实用户并不需要关心。
这种方式相对最传统的部署架构，具有如下优点：

* 传统方式需要准备应用所需要的所有运行环境以及依赖库，如果与其他应用部署在一起，还需要解决依赖冲突的问题。而后者应用运行环境与底层OS隔离，因为应用运行的环境以及依赖的库都已经打包到容器镜像中了，与OS是完全隔离的。
* 资源利用率高，因为相对传统部署架构，部署密度大幅度提高了，大大减少了资源闲置时间和资源碎片。
* 弹性扩展能力更强，增加或者减少一个Pod非常容易；
...

但是这种方式，仍然还是和平台耦合在一起的，虽然通过Horizontal Pod Autoscaler以及Cluster Autoscaler实现了Pod以及集群规模的自动水平扩展能力，依然无法在具体请求数量层面上进行自由缩放，继续引用AWS云架构战略副总裁Adrian Cockcroft的话：“如果你的PaaS能够有效地在20毫秒内启动实例并运行半秒,那么就可以称之为Serverless”。

#### Serverless架构
我们知道一个Web应用包括静态页面和动态代码构成，静态内容是不变的，比如HTML、JS、CSS、图片、视频等，而业务逻辑通过动态代码在后台读取数据库并渲染为静态页面呈现给用户，是业务系统的核心。

在目前流行的MVC架构以及微服务模式下，通常前端和后端是分离的，后端处理业务逻辑并暴露Restful API，而前端则通过Ajax异步调用后端的API请求数据并渲染成表格、列表等进行数据展示。

这种应用架构很容易进行Serverless改造：
1. 静态页面直接放到对象存储中，前面再加上CDN做内容分发加速访问；
2. 数据存储在托管的数据库中；
3. 后端业务逻辑处理部分通过Serverless函数计算实现；
4. 后端API通过api gateway发布；

### 软件架构：
* Serverless架构
* 微服务架构
* 分布式架构
* 单体架构

#### 单体架构
单体架构比较初级，典型的三级架构，前端(Web/手机端)+中间业务逻辑层+数据库层。这是一种典型的Java Spring mvc或者Python Django框架的应用。

#### 分布式应用
中级架构，分布式应用，中间层分布式+数据库分布式，是单体架构的并发扩展，将一个大的系统划分为多个业务模块，业务模块分别部署在不同的服务器上，各个业务模块之间通过接口进行数据交互。数据库也大量采用分布式数据库，如redis、ES、solor等。通过LVS/Nginx代理应用，将用户请求均衡的负载到不同的服务器上。

这种架构提供了负载均衡的能力，大大提高了系统负载能力，解决了网站高并发的需求。另外还有以下特点：
1. 降低了耦合度：把模块拆分,使用接口通信,降低模块之间的耦合度。
2. 责任清晰：把项目拆分成若干个子项目,不同的团队负责不同的子项目。
3. 扩展方便：增加功能时只需要再增加一个子项目,调用其他系统的接口就可以。
4. 部署方便:可以灵活的进行分布式部署。
5. 提高代码的复用性：比如service层,如果不采用分布式rest服务方式架构就会在手机wap商城,微信商城,pc,android，ios每个端都要写一个service层逻辑,开发量大,难以维护一起升级,这时候就可以采用分布式rest服务方式,公用一个service层。

缺点 : 系统之间的交互要使用远程通信,接口开发增大工作量,但是利大于弊。

#### 微服务架构
微服务架构，主要是中间层分解，将系统拆分成很多小应用（微服务），微服务可以部署在不同的服务器上，也可以部署在相同的服务器不同的容器上。当应用的故障不会影响到其他应用，单应用的负载也不会影响到其他应用，其代表框架有Spring cloud、Dubbo等。

1. 易于开发和维护： 一个微服务只会关注一个特定的业务功能，所以它业务清晰、代码量较少。 开发和维护单个微服务相对简单。而整个应用是由若干个微服务构建而成的，所以整个应用也会被维持在一个可控状态。
2. 单个微服务启动较快： 单个微服务代码量较少， 所以启动会比较快。
局部修改容易部署： 单体应用只要有修改，就得重新部署整个应用，微服务解决了这样的问题。 一般来说，对某个微服务进行修改，只需要重新部署这个服务即可。
技术栈不受限：在微服务架构中，可以结合项目业务及团队的特点，合理地选择技术栈。例如某些服务可使用关系型数据库MySQL；某些微服务有图形计算的需求，可以使用Neo4j；甚至可根据需要，部分微服务使用Java开发，部分微服务使用Node.js开发。

3. 运维要求较高：更多的服务意味着更多的运维投入。在单体架构中，只需要保证一个应用的正常运行。而在微服务中，需要保证几十甚至几百个服务服务的正常运行与协作，这给运维带来了很大的挑战。

4. 分布式固有的复杂性：使用微服务构建的是分布式系统。对于一个分布式系统，系统容错、网络延迟、分布式事务等都会带来巨大的挑战。
5. 接口调整成本高：微服务之间通过接口进行通信。如果修改某一个微服务的API，可能所有使用了该接口的微服务都需要做调整。
6. 重复劳动：很多服务可能都会使用到相同的功能，而这个功能并没有达到分解为一个微服务的程度，这个时候，可能各个服务都会开发这一功能，从而导致代码重复。尽管可以使用共享库来解决这个问题（例如可以将这个功能封装成公共组件，需要该功能的微服务引用该组件），但共享库在多语言环境下就不一定行得通了。

#### Serverless架构

1. 低运营成本：在业务突发性极高的场景下，系统为了应对业务高峰，必须构建能够应对峰值需求的系统，这个系统在大部分时间是空闲的，这就导致了严重的资源浪费和成本上升。在微服务架构中，服务需要一直运行，实际上在高负载情况下每个服务都不止一个实例，这样才能完成高可用性；在Serverless架构下，服务将根据用户的调用次数进行计费，按照云计算pay-as-you-go原则，如果没有东西运行，你就不必付款，节省了使用成本。同时，用户能够通过共享网络、硬盘、CPU等计算资源，在业务高峰期通过弹性扩容方式有效的应对业务峰值，在业务波谷期将资源分享给其他用户，有效的节约了成本。
2. 简化设备运维：在原有的IT体系中，开发团队即需要维护应用程序，同时还要维护硬件基础设施；Serverless架构中，开发人员面对的将是第三方开发或自定义的API 和URL，底层硬件对于开发人员透明化了，技术团队无需再关注运维工作，能够更加专注于应用系统开发。
3. 提升可维护性：Serverless架构中，应用程序将调用多种第三方功能服务，组成最终的应用逻辑。目前，例如登陆鉴权服务，云数据库服务等第三方服务在安全性、可用性、性能方面都进行了大量优化，开发团队直接集成第三方的服务，能够有效的降低开发成本，同时使得应用的运维过程变得更加清晰，有效的提升了应用的可维护性。
4. 更快的开发速度：这一点在现在互联网创业公司得到很好的体现，创业公司往往开始由于人员和资金等问题，不可能每个产品线都同时进行，这时候就可以考虑第三方的Baas平台，比如使用微信的用户认证、阿里云提供的RDS，极光的消息推送，第三方支付及地理位置等等，能够很快进行产品开发的速度，把工作重点放在业务实现上，把产品更快的推向市场。
ServerLess架构也有其缺点：
5. 厂商平台绑定：平台会提供Serverless架构给大玩家，比如AWS Lambda，运行它需要使用AWS指定的服务，比如API网关，DynamoDB，S3等等，一旦你在这些服务上开发一个复杂系统，你会粘牢AWS，以后只好任由他们涨价定价或者下架等操作，个性化需求很难满足，不能进行随意的迁移或者迁移的成本比较大，同时不可避免带来一些损失。Baas行业内一个比较典型的事件，2016年1月19日Facebook关闭曾经花巨额资金收购的Parse，造成用户不得不迁移在这个平台中产生一年多的数据，无疑需要花费比较大的人力和时间成本。
6. 成功案例比较少，没有行业标准：目前的情况也只适合简单的应用开发，缺乏大型成功案例的推动。对于Serverless缺乏统一的认知以及相应的标准，无法适应所有的云平台。

### 云原生

**何谓云原生？**

云原生是一种构建和运行应用程序的方法，是一套技术体系和方法论。云原生（CloudNative）是一个组合词，Cloud+Native。Cloud 表示应用程序位于云中，而不是传统的数据中心；Native 表示应用程序从设计之初即考虑到云的环境，原生为云而设计，在云上以最佳姿势运行，充分利用和发挥云平台的弹性+分布式优势。

>Pivotal 最新官网对云原生概括为4个要点：DevOps+持续交付+微服务+容器。

总而言之，符合云原生架构的应用程序应该是：采用开源堆栈（K8S+Docker）进行容器化，基于微服务架构提高灵活性和可维护性，借助敏捷方法、DevOps支持持续迭代和运维自动化，利用云平台设施实现弹性伸缩、动态调度、优化资源利用率。

#### 云原生的四要素
* 微服务

几乎每个云原生的定义都包含微服务，跟微服务相对的是单体应用，微服务有理论基础，那就是康威定律，指导服务怎么切分，很玄乎，凡是能称为理论定律的都简单明白不了，定律的大概意思是组织架构决定产品形态，不知道跟马克思的生产关系影响生产力有无关系。

微服务架构的好处就是按 function 切了之后，服务解耦，内聚更强，变更更易；另一个划分服务的技巧据说是依据 DDD 来搞，不过鄙人对 DDD 知之甚少。

* 容器化

Docker 是应用最为广泛的容器引擎，在思科、谷歌等公司的基础设施中大量使用，是基于 LXC 技术搞的，容器也是一个进程，容器化为微服务提供实施保障，起到应用隔离作用；K8S 是容器编排系统，用于容器管理，容器间的负载均衡，谷歌搞的，Docker 和 K8S 都采用 Go 编写，都是好东西，你值得拥有。

* DevOps

这是个组合词，Dev+Ops，就是开发和运维合体，不像开发和产品，经常刀剑相见，实际上 DevOps 应该还包括测试，DevOps 是一个敏捷思维，是一个沟通文化，也是组织形式，为云原生提供持续交付能力。

* 持续交付

持续交付是不误时开发，不停机更新，小步快跑，反传统瀑布式开发模型，这要求开发版本和稳定版本并存，其实需要很多流程和工具支撑。

#### 如何云原生？

云计算的3层划分，即基础设施即服务(IaaS)、平台即服务(PaaS)、软件即服务(SaaS)为云原生提供了技术基础和方向指引，真正的云化不仅仅是基础设施和平台的变化，应用也需要做出改变，摈弃传统的土方法，在架构设计、开发方式、部署维护等各个阶段和方面都基于云的特点，重新设计，从而建设全新的云化的应用，即云原生应用。

1.	本地部署的传统应用往往采用 c/c++、企业级 java 编写，而云原生应用则需要用以网络为中心的 go、node.js 等新兴语言编写。
2.	本地部署的传统应用可能需要停机更新，而云原生应用应该始终是最新的，需要支持频繁变更，持续交付，蓝绿部署。
3.	本地部署的传统应用无法动态扩展，往往需要冗余资源以抵抗流量高峰，而云原生应用利用云的弹性自动伸缩，通过共享降本增效。
4.	本地部署的传统应用对网络资源，比如 ip、端口等有依赖，甚至是硬编码，而云原生应用对网络和存储都没有这种限制。
5.	本地部署的传统应用通常人肉部署手工运维，而云原生应用这一切都是自动化的。
6.	本地部署的传统应用通常依赖系统环境，而云原生应用不会硬连接到任何系统环境，而是依赖抽象的基础架构，从而获得良好移植性。
7.	本地部署的传统应用有些是单体(巨石)应用，或者强依赖，而基于微服务架构的云原生应用，纵向划分服务，模块化更合理。

技术的趋势和影响

软件设计有两个关键目标：高内聚、低耦合，围绕这2个核心目标，又提出了单一职责、开闭原则、里氏替换、依赖倒置、接口隔离、最少知识等设计原则。

纵观近二十年的科技互联网发展历程，大的趋势是技术下沉，特别是近些年，随着云计算的发展和普及，基础设施越来越厚实，业务开发变得越来越容易，也越来越没有技术含量，而之前困扰小团队的性能、负载、安全性、扩展性问题都不复存在，这不禁让互联网行业的油腻大叔们噤若寒蝉，仿佛分分钟就要被卷入历史洪流而万劫不复。


### 混合云：企业上云新常态
上云已是大势所趋，但是对于企业用户而言，有些业务由于数据主权和安全隐私的考虑，无法直接上云，只能采用混合云架构。Gartner 预测 81% 的企业将采用多云/混合云战略，混合云架构已经成为企业上云的新常态。

混合云架构的优点是：

> **享受了公有云的便利**
> **保证了不便迁移的私有云系统的正常运行**
> **网络互通，统一管理**

**第一条是业务云化**，也就是把自己的业务系统比如ERP（企业资源计划）、MES、CRM等迁移到云上，用更快的速度实现统一管理、随处接入、全球覆盖和异地灾备。这是企业上云的基础

**第二条是数据能力的云化**，也就是把数据采集、计算、管理和应用这些所有场景的能力全部在云端执行。大数据的降维打击目前在零售、安防等领域开始逐渐明晰，数据能力的云化肯定是相关企业要考虑的。

**第三条是利用云服务快速应对业务创新**，也就是说云服务的那些敏捷、接入、管理的优势，最后还是要回到服务业务创新上来。云服务，就应该像电力一样，需要的时候一开开关就来，想要更多的电立刻可以调来，并且非常的可靠。




## 容器

### 什么是容器？

容器的英语是 Container，它的意思是集装箱。我们知道，经济全球化的基础就是现代运输体系，而其核心正是集装箱。集装箱的出现实现了物流运输的标准化，自动化，大大降低了运输的成本，使得整合全球的供应链变为可能。这就是著名经济学人谈到的“没有集装箱，就没有全球化”。

### 容器的价值
在过去几年中，容器技术得到了越来越广泛的应用。其中最主要的 3 个核心价值是：

* 敏捷

天下武功唯快不破。在企业数字化转型时代，每个企业都在面临着新兴业务模式的冲击和众多的不确定性。一个成功的企业不是看他现在规模有多大，过去的战略有多成功，而是要看他是否有能力持续创新。容器技术提升了企业的 IT 架构的敏捷性，从而提升了业务敏捷性，可以加速业务创新。比如疫情期间，教育、视频、公共健康等行业的在线化出现了爆发性高速增长。通过容器技术可以很好地把握业务快速增长的机遇。在业界的统计中，使用容器技术可以实现 3~10 倍交付效率提升，这意味着企业可以进行快速迭代，低成本试错。

* 弹性

在互联网时代，企业 IT 系统经常需要面对电商大促、突发事件等可预期和非预期的流量增长。通过容器技术可以充分发挥云计算的弹性，通过提升部署密度和弹性来降低计算成本。比如在线教育，面对疫情之下指数级增长的流量，可以通过容器技术来缓解扩容的压力，支持数十万教师在线教学，百万学生在线学习。

* 可移植性

容器技术推进了云计算的标准化进程。容器已经成为应用分发和交付的标准，可以将应用与底层运行环境解耦；Kubernetes 成为资源调度和编排的标准，屏蔽了底层架构的差异性，帮助应用平滑运行在不同的基础设施上。CNCF 云原生计算基金会推出了Kubernetes一致性认证，进一步保障了不同 K8s 实现的兼容性。采用容器技术来构建云时代的应用基础设施将变得越来越容易。


### linux容器

Linux容器是与系统其他部分隔离开的一系列进程，从另一个镜像运行，并由该镜像提供支持进程所需的全部文件。
容器提供的镜像包含了应用的所有依赖项，因而在从开发到测试再到生产的整个过程中，它都具有可移植性和一致性。

>容器不就是虚拟化吗

是，但也不竟然。我们用一种简单方式来思考一下：
虚拟化使得许多操作系统可同时在单个系统上运行。
容器则可共享同一个操作系统内核，将应用进程与系统其他部分隔离开。

### docker的目标

docker的主要目标是"Build,Ship and Run any App,Angwhere",构建，运输，处处运行
```
构建：做一个docker镜像
运输：docker pull
运行：启动一个容器
```
每一个容器，他都有自己的文件系统rootfs.


## 数据库

### 时序数据库
时序数据是基于时间的一系列的数据。在有时间的坐标中将这些数据点连成线，往过去看可以做成多纬度报表，揭示其趋势性、规律性、异常性；往未来看可以做大数据分析，机器学习，实现预测和预警。

时序数据库面向的是海量数据的写入存储读取，单机是无法解决问题的。所以需要采用多机存储，也就是分布式存储。
分布式存储首先要考虑的是如何将数据分布到多台机器上面，也就是 分片（sharding）问题。下面我们就时序数据库分片问题展开介绍。分片问题由分片方法的选择和分片的设计组成。

从DB-Engines的数据库类别流行度趋势榜上可以看到，时序数据库（Time Series DB）的流行度在最近的两年内，一直都是保持一个很高的增长趋势。

#### 时序数据库的一些基本概念：

* metric: 度量，相当于关系型数据库中的table。

* data point: 数据点，相当于关系型数据库中的row。

* timestamp：时间戳，代表数据点产生的时间。

* field: 度量下的不同字段。比如位置这个度量具有经度和纬度两个field。一般情况下存放的是会随着时间戳的变化而变化的数据。

* tag: 标签，或者附加信息。一般存放的是并不随着时间戳变化的属性信息。timestamp加上所有的tags可以认为是table的primary key。

### 开源时序数据库

* Prometheus、Influxdb和opentsdb是三款业内比较知名且实际生产使用的时序数据库了

* Influxdb：目前开源排名最高的时序数据库，是单独的数据库，主要就是用来写入和查询数据。目前集群版已经闭源商业化，开源版仅支持单机模式。数据采集使用push模式（数据源主动将数据写入influxdb）。优势是提供类SQL的查询引擎。

* Prometheus：提供了一整套的监控体系，包括数据的采集存储报警等。仅支持单机，数据写入本地。数据采集使用的是pull模式。

> 阿里云TSDB是阿里自研的一种高性能，低成本，稳定可靠的在线时序时空数据库产品。该产品统一了阿里巴巴集团90%以上的APM数据和事件型数据的存储和计算，并在广泛应用于外部的物联网，工业制造，电力，化工以及IT运维等行业。

### 非关系型数据库

Cassandra是一个混合型的非关系的数据库，类似于Google的BigTable。其主要功能比Dynamo （分布式的Key-Value存储系统）更丰富，但支持度却不如文档存储MongoDB（介于关系数据库和非关系数据库之间的开源产品，是非关系数据库当中功能最丰富，最像关系数据库的。支持的数据结构非常松散，是类似json的bjson格式，因此可以存储比较复杂的数据类型）。

Cassandra的主要特点就是它不是一个数据库，而是由一堆数据库节点共同构成的一个分布式网络服务，对Cassandra 的一个写操作，会被复制到其他节点上去，对Cassandra的读操作，也会被路由到某个节点上面去读取。对于一个Cassandra集群来说，扩展性能是比较简单的事情，只管在群集里面添加节点就可以了。

Cassandra具有三个突出特点：

- 模式灵活：使用Cassandra，像文档存储，你不必提前解决记录中的字段。你可以在系统运行时随意的添加或移除字段。这是一个惊人的效率提升，特别是在大型部署上。
- 可扩展性：Cassandra是纯粹意义上的水平扩展。为给集群添加更多容量，可以指向另一台电脑。你不必重启任何进程，改变应用查询，或手动迁移任何数据。
- 多数据中心：你可以调整你的节点布局来避免某一个数据中心起火，一个备用的数据中心将至少有每条记录的完全复制。

Cassandra是一个高度可伸缩的分区行存储，其将行组织到具有所需主键的表中。分区意味着Cassandra可以在应用程序透明的情况下跨多台机器分发数据，当从集群中添加和删除机器时，Cassandra将自动重新分区。行存储意味着像关系数据库一样，Cassandra通过行和列来组织数据。此外，Cassandra的查询语言(CQL)是SQL的近亲。

### Hadoop Hive

Hive是基于Hadoop的一个数据仓库工具，用来进行数据提取、转化、加载，这是一种可以存储、查询和分析存储在Hadoop中的大规模数据的机制。Apache Hive数据仓库软件有助于使用SQL读取，写入和管理驻留在分布式存储中的大型数据集。 可以将结构投影到已经存储的数据上。提供了命令行工具和JDBC驱动程序以将用户连接到Hive。

Hive数据仓库工具能将结构化的数据文件映射为一张数据库表，并提供SQL查询功能，能将SQL语句转变成MapReduce任务来执行。Hive的优点是学习成本低，可以通过类似SQL语句实现快速MapReduce统计，使MapReduce变得更加简单，而不必开发专门的MapReduce应用程序。

Hive中包含以下四类数据模型：表(Table)、外部表(External Tablc)、分区(Partition)、桶(Bucket)，具体解释如下：

- Hive中的Table和数据库中的Table在概念上是类似的。在Hive中每一个Table都有一个相应的目录存储数据。
- 外部表是一个已经存储在HDFS中，并具有一定格式的数据。使用外部表意味着Hive表内的数据不在Hive的数据仓库内，它会到仓库目录以外的位置访问数据。
- 分区对应于数据库中的分区列的密集索引，但是Hive中分区的组织方式和数据库中的很不相同。在Hive中，表中的一个分区对应于表下的一个目录，所有的分区的数据都存储在对应的目录中。
- 桶对指定列进行哈希计算，会根据哈希值切分数据，目的是为了并行，每一个桶对应一个文件。

## 数据管理

* 数据采集

数据采集这一块，有设备数据iot，系统数据可以用etl，互联网数据用爬虫，日志数据可以用flume，kafka什么的。这样解决了数据采集的问题，你就有了大数据。

* 数据融合

数据融合是做数据的整合，将一些需要的数据拿出来，或者过滤掉不需要的数据，例如做网站日志分析的时候，用hive做一些数据处理，处理的数据再去做一些网站kpi的分析。

* 数据治理

数据治理说起来简单其实是很复杂的一件事。数据治理就是把数做的规整，整齐，标准统一，质量高的数据。但是这个涉及业务，梳理会很麻烦。

* 数据存储
* 数据计算

存储计算就算是大数据的核心功能了。将大数据存储起来，然后进行计算，得到结果，这些都是需要分布式的。存储是基于hdfs的，文件存储，列存储等。计算的话区别于不同的场景分为三类吧，离线计算也叫批量计算，实时流处理，查询式分析等等。离线是MR 、spark，实时的有flink、sparkstreaming、strom，查询式分析的话就是提前做一些数据处理，然后通过sql查询进行分析。

* 数据分析

数据分析就理解为人工智能和统计分析。现在人工智能这么火，大数据平台不提供ai能力就不能叫大数据平台。主要包括一些机器学习算法和深度学习算法，一般的数据预测用机器学习就够了，语义、图像识别等等用深度学习。常见的两个框架机器学习skitlearn、深度学习Tensorflow。

* 数据可视化

最后是可视化，这个是展现形式，比较常见的bi，可视化大屏等等的。

> 一般的大数据平台都会包括这些流程，叫做一站式大数据平台。

## 微信小程序开发

### UI界面

* WeUI
* ColorUI

### 云开发
#### 云函数

#### 云存储

#### 云数据库
数据库操作

```
# 微信小程序云数据库--属性计数
db.collection('userInfo').where({
      _class: '测试所党总支'
    }).count()

# 聚合操作---求平均，分类，求和
db.collection('userInfo')
.aggregate()
.group({
  _id: '$type',
  avgTime: $.avg('$time')
})
.end()
```

## Python数据分析

* pandas
* numpy
* tensorflow
* Open CV
* Keras
* 爬虫

## 其他

### WebGL
所有的逻辑计算都是由CPU来计算完的。在我们学习计算机组成原理的时候，我们知道这些计算其实都是CPU的指令集在操作寄存器而已。对于输出的结果显示，基本上都是文字字母，简单的在阴极射线管显示器即可显示。

### 图形编程API
图形领域是十分重要和可发展的，介于操作系统和硬件（驱动）的中间层，可以做很多事情，提供重要的图形编程接口，方便开发二维和三维的图形。于是，这个世界基本上又出现了两大阵型，OpenGL和DirectX。

### OpenGL ES 1.0的渲染管线

GPU内部有许多处理图形信号的并行处理单元，所以它比CPU的串行执行效率高很多。我们理解的CPU的能力无非就是有很多的指令集，如果我们要调用这些指令集的话，就需要编写汇编语言，而在高级语言层面调用的API就是系统或者平台为我们封装好的能力。而GPU，也是会有相应的指令，硬件开发商会开发相应的驱动程序，提供标准的API供系统调用。OpenGL和DirectX就是基于此提供了相应的渲染能力，实际上，它们两个才是标准大佬，反推硬件提供相应的能力。渲染管线实际上就是通过处理单元处理的一系列绘制过程。

重点理解几点：
1. 什么是图元，其实就是图像单元；OpenGL绘制图形的时候，是有一个个的图元组合而成的。绘制方式有点、线和三角形，分别对应三种图元。
2. 什么是光栅化，图元在数学上是连续的量，但是在显示器就是离散的像素，所以，光栅化就是把顶点数据转换为片元的过程。
3. 什么是片元，为什么不叫像素？像素是屏幕上的点，那是二维的，但是一个屏幕上的像素在三维中，可能覆盖了很多个像素，于是在三维中不能叫像素，应该叫片元。

## DBA
数据库管理员（Database Administrator，简称 DBA），是从事管理和维护数据库管理系统(DBMS)的相关工作人员的统称，属于运维工程师的一个分支，主要负责业务数据库从设计、测试到部署交付的全生命周期管理。

DBA 的核心目标是保证数据库管理系统的稳定性、安全性、完整性和高性能。在国外，也有公司把 DBA 称作数据库工程师(Database Engineer)，两者的工作内容基本相同，都是保证数据库服务 7*24 小时的稳定高效运转，但是需要区分一下 DBA 和数据库开发工程师(Database Developer)：

1. 数据库开发工程师的主要职责是设计和开发数据库管理系统和数据库应用软件系统，侧重于软件研发；
2. DBA 的主要职责是运维和管理数据库管理系统，侧重于运维管理。
